<mat-toolbar>
  <span class="title">CRUD Table and Bar Chart</span>
</mat-toolbar>

<div class="container">
  <mat-card>
    <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <mat-form-field appearance="fill">
          <mat-label>Name</mat-label>
          <input matInput formControlName="name">
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>Price</mat-label>
          <input matInput type="number" formControlName="price">
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>Category</mat-label>
          <input matInput formControlName="category">
        </mat-form-field>
      </div>
      <div class="form-buttons">
        <button mat-raised-button color="primary" type="submit" [disabled]="!productForm.valid">{{ editIndex !== null ? 'Update Product' : 'Add Product' }}</button>
        <button mat-raised-button color="warn" type="button" (click)="resetForm()">Reset</button>
      </div>
    </form>
  </mat-card>

  <div class="content">
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Price</th>
            <th>Category</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of products; let i = index">
            <td>{{ product.name }}</td>
            <td>{{ product.price }}</td>
            <td>{{ product.category }}</td>
            <td>
              <button class="edit-button" (click)="editProduct(i)">Edit</button>
              <button class="delete-button" (click)="deleteProduct(i)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="chart-container">
      <ngx-charts-bar-vertical
        [view]="view"
        [scheme]="'cool'"
        [results]="chartData"
        [gradient]="false"
        [xAxis]="true"
        [yAxis]="true"
        [legend]="false"
        [showXAxisLabel]="true"
        [showYAxisLabel]="true"
        xAxisLabel="Products"
        yAxisLabel="Price">
      </ngx-charts-bar-vertical>
    </div>
  </div>
</div>
